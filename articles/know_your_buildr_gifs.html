<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="buildr">
<title>Know your {buildr} • buildr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Know your {buildr}">
<meta property="og:description" content="buildr">
<meta property="og:image" content="https://netique.github.io/buildr/reference/figures/card.png">
<meta property="og:image:alt" content="buildr: Organize &amp; Run Build Scripts Comfortably">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@netikja">
<meta name="twitter:site" content="@netikja">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-B8CQ89BFM4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B8CQ89BFM4');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">buildr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/know_your_buildr_gifs.html">Know your {buildr}</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/netique/buildr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Know your {buildr}</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/netique/buildr/blob/HEAD/vignettes/articles/know_your_buildr_gifs.Rmd" class="external-link"><code>vignettes/articles/know_your_buildr_gifs.Rmd</code></a></small>
      <div class="d-none name"><code>know_your_buildr_gifs.Rmd</code></div>
    </div>

    
    
<p>This article extends what <code>README</code> or <a href="https://netique.github.io/buildr/">buildr</a> homepage already briefly described. It’s identical to the vignette, but it includes a bunch of animated examples. After reading it, you’ll be familiar with:</p>
<ul>
<li>how to work with <a href="https://netique.github.io/buildr/">buildr</a> using your own keyboard shortcuts</li>
<li>how <a href="https://netique.github.io/buildr/">buildr</a> works under the hood</li>
<li>what is a <code>Makefile</code> and how <a href="https://netique.github.io/buildr/">buildr</a> uses it</li>
<li>tips for some advanced usage</li>
</ul>
<div class="section level2">
<h2 id="buildr-rstudio">
<code>{buildr}</code> + RStudio = ❤️<a class="anchor" aria-label="anchor" href="#buildr-rstudio"></a>
</h2>
<p>It’s easy to work with <a href="https://netique.github.io/buildr/">buildr</a> by printing function calls in your <code>R</code> console. However, much more feasible is to use <a href="https://netique.github.io/buildr/">buildr</a> as RStudio Addin, which plays nicely with keyboard shortcuts, adding to the comfort. <a href="https://netique.github.io/buildr/">buildr</a> addin commands are available below your toolbar in RStudio just upon the installation:</p>
<p><img src="addins_showcase.gif" width="100%"></p>
<blockquote>
<p>Well, that’s pretty neat, but my time is precious and I don’t mean to spend it by clicking around that tiny toolbar.</p>
</blockquote>
<p>Likewise! Here come the keyboard shortcuts. The quickest way how to set them up is to use <code><a href="../reference/edit_shortcuts.html">buildr::edit_shortcuts()</a></code> as shown here (for <code><a href="../reference/build.html">build()</a></code> addin command):</p>
<p><img src="shortcuts_showcase.gif" width="100%"></p>
<p>Note that all three functions are supported as addin commands. If you stick with recommended defaults, there is no need to use anything else. The only function that may need a richer user input is <code><a href="../reference/init.html">init()</a></code>. Let’s describe it in more detail.</p>
</div>
<div class="section level2">
<h2 id="lets-see-what-you-got-there">Let’s see what you got there<a class="anchor" aria-label="anchor" href="#lets-see-what-you-got-there"></a>
</h2>
<p>The <code><a href="../reference/init.html">init()</a></code> function should be called first (and only occasionally afterwards). It searches your project root (the directory where your <code>.Rproj</code> file resides) and looks for <code>.R</code> scripts that shares a common prefix separated from the rest of a file name by a separator (“build” and “_” by default, respectively). Although it is possible to use different prefix and separator, we recommend that you stick with the default. For more details, please see the reference (documentation) for the <code><a href="../reference/init.html">init()</a></code> function.</p>
<p>Those “build scripts” can do really anything, that’s up to you. Commonly, they share the following:</p>
<ol style="list-style-type: decimal">
<li>loading of libraries</li>
<li>sourcing some <code>.R</code> scripts, e.g., <code>source("run_this.R", encoding = "UTF-8", local = TRUE)</code>, which can do a bunch of things, like:</li>
</ol>
<ul>
<li>downloading any remote data</li>
<li>cleaning them</li>
<li>estimating some “heavier” models, saving their output</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>finally, you’d typically include some <a href="https://github.com/rstudio/rmarkdown" class="external-link">rmarkdown</a> call, say <code>rmarkdown::render("my_report.Rmd")</code>
</li>
</ol>
<p>Here is <code><a href="../reference/init.html">init()</a></code> in action:</p>
<p><img src="init_showcase.gif" width="100%"></p>
</div>
<div class="section level2">
<h2 id="line-up-your-bricks">Line up your bricks<a class="anchor" aria-label="anchor" href="#line-up-your-bricks"></a>
</h2>
<p>Once the <a href="https://netique.github.io/buildr/">buildr</a> discovered your build scripts, it automatically creates a <code>Makefile</code> in your project root for you and populates it with rules describing how to run your build scripts. Let’s make a little detour and talk more about <code>Makefile</code>s more (<strong>you can skip this section if you just want to use the package and do your stuff</strong>).</p>
<pre><code><span><span class="va">target</span><span class="op">:</span></span>
<span>  <span class="va">recipe</span></span></code></pre>
<p>A target is usually a file name, but in our case, it is an arbitrary string uniquely identifying given <code>Makefile</code> rule. A recipe consists of a command describing what to do. In our case, we want to source a <code>.R</code> script, say <code>build_all.R</code>, so our rule would look like this:</p>
<pre><code>all:
  @Rscript -e 'source("build_all.R")'</code></pre>
<p>The target of our rule is “all” and the recipe instructs the computer to quietly (hence the <code>@</code>) start <code>R</code> and source the script “build_all.R”, which resides in your project root. Note that <code>Makefile</code>s are whitespace sensitive. A tab must always precede the beginning of the recipe. <strong>Again, you don’t have to bother with any of this, as the <a href="https://netique.github.io/buildr/">buildr</a> does everything for you.</strong></p>
<p>Now you may wonder why this section is called “Line up your bricks”? That’s simple. The purpose of <code><a href="../reference/aim.html">aim()</a></code> is to line up the <code>Makefile</code> rules in a particular order because the Rstudio Build pane always takes the first rule available (in fact, you can specify the target manually, but it is buried deep inside the GUI). The goal of <code><a href="../reference/aim.html">aim()</a></code> is to list your <code>Makefile</code> rules and show them so that you can pick the one you are interested in (i.e. to prioritize it). Your choice then projects in the actual <code>Makefile</code> – the desired rule is in the first place. That’s what <code><a href="../reference/aim.html">aim()</a></code> does. In case you already know the target of a given rule, you can just supply it directly in the call like this: <code>aim(target = "all")</code> or even simpler <code>aim("all")</code>.</p>
<p>Here is <code><a href="../reference/aim.html">aim()</a></code> in action:</p>
<p><img src="aim_showcase.gif" width="100%"></p>
</div>
<div class="section level2">
<h2 id="build">Build<a class="anchor" aria-label="anchor" href="#build"></a>
</h2>
<p>Now that everything is set-up, your only task is to call <code><a href="../reference/build.html">build()</a></code>. Under the hood, <a href="https://netique.github.io/buildr/">buildr</a> makes sure that RStudio is set appropriately to handle the <code>Makefile</code>. RStudio Build pane may be set for building packages or websites, so it is crucial to ensure your script is run nice and clean. In case something is wrong, <a href="https://netique.github.io/buildr/">buildr</a> automatically offers you a remedy.</p>
<p>Here is <code><a href="../reference/build.html">build()</a></code> in action:</p>
<p><img src="build_showcase.gif" width="100%"></p>
</div>
<div class="section level2">
<h2 id="whats-next">What’s next?<a class="anchor" aria-label="anchor" href="#whats-next"></a>
</h2>
<p>If you’ve already dived into the documentation of the package, you might still wonder what is the purpose of <code>command_args</code> argument of <code><a href="../reference/init.html">init()</a></code>. When the build script is processed in RStudio Build pane, the recipe may be accompanied by so-called “command argument”. This argument can be picked up by <code>R</code> and used in your build script to further specify how it should be run. In order to use it, state your command argument when you initialize the <code>Makefile</code> using <code>init(command_arg = "my_argument")</code> or manually. Note that the command argument will be placed after <em>each</em> rule’s recipe. In future updates, this may accommodate a vector of command arguments, but there are many things to solve yet. Then, include the following line to your script:</p>
<pre><code><span><span class="va">command_args</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/commandArgs.html" class="external-link">commandArgs</a></span><span class="op">(</span>trailingOnly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
<p>The object <code>command_args</code> that you’ve created by the assignment will comprise the command argument stated in <code>Makefile</code> when it is run, and you can further use it inside your script. E.g., you can query whether specific command argument was passed by <code>if ("my_arg" %in% command_args) {print("Yes")} else {print("No")}</code>.</p>
</div>
<div class="section level2">
<h2 id="i-want-more-complexity">I want more complexity!<a class="anchor" aria-label="anchor" href="#i-want-more-complexity"></a>
</h2>
<p>The <a href="https://netique.github.io/buildr/">buildr</a> was made with simplicity in mind. It helps you bind a given script with a single keystroke using only a handful of functions. The content of such script is completely up to you. What you code is what you get.</p>
<p>However, if you don’t mind delving a bit into new and slightly complicated things, I warmly recommend you to take a look at <a href="https://docs.ropensci.org/drake/" class="external-link">drake</a> package or at its successor, <a href="https://github.com/wlandau/targets" class="external-link">targets</a>.</p>
<p>And as always, happy building!</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://jan.netik.cz" class="external-link">Jan Netik</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
